<ion-header [translucent]="true" *ngIf="showHeader">
	<ion-toolbar>
		<ion-title>{{title}}</ion-title>
		<ion-progress-bar type="indeterminate" *ngIf="loadingSermons || loadingSeries"></ion-progress-bar>
	</ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" [scrollEvents]="true" (ionScroll)="handleScroll($any($event))">
	<ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
		<ion-refresher-content></ion-refresher-content>
	</ion-refresher>
	<app-fixed-grid>
		<app-header>
			<h1>{{title}}</h1>
		</app-header>
		<p class="ion-hide-lg-up">Welcome to {{appName}}</p>
		<!-- Recent Sermons -->
		<ion-row>
			<ion-col>
				<h2>Recent talks</h2>
			</ion-col>
			<ion-col class="ion-text-right">
				<a [routerLink]="['/search']">View more</a>
			</ion-col>
		</ion-row>
		<app-skeleton *ngIf="loadingSermons" type="cards"></app-skeleton>
		<div class="scroll-x" *ngIf="!loadingSermons && sermonsList && sermonsList.sermons">
			<ion-card *ngFor="let sermon of sermonsList.sermons" [routerLink]="['/play', sermon.sermon_id]">
				<ion-img src="{{sermon.series_image}}" alt="{{sermon.sermon_title}}"></ion-img>
				<ion-card-header xstyle="background: rgba(var(--ion-color-primary-rgb), 0.75);">
					<ion-card-title class="nowrap" xstyle=" color: var(--ion-color-secondary-contrast)">{{sermon.sermon_title}}</ion-card-title>
				</ion-card-header>
				<ion-card-content xstyle="background: rgba(var(--ion-color-primary-rgb), 0.75); color: var(--ion-color-secondary-contrast)">
					{{sermon.speaker_name}}<br />
					{{sermon.sermon_date | date: 'mediumDate'}}<br />
					{{sermon.series_name}}
				</ion-card-content>
			</ion-card>
		</div>

		<!-- Recent Series -->
		<ion-row>
			<ion-col>
				<h2>Recent sermon series</h2>
			</ion-col>
			<ion-col class="ion-text-right">
				<a [routerLink]="['/browse/series']">View more</a>
			</ion-col>
		</ion-row>
		<app-skeleton *ngIf="loadingSeries" type="cards"></app-skeleton>
		<div class="scroll-x" *ngIf="!loadingSeries && seriesList && seriesList.series">
			<ion-card *ngFor="let series of seriesList.series" [routerLink]="['/browse/series', series.series_id]">
				<ion-img src="{{series.series_thumb}}" alt="{{series.series_name}}"></ion-img>
			</ion-card>
		</div>
		<br />
		<ion-list id="labels-list" class="ion-hide-lg-up">
			<ion-item lines="none" detail="true" detail-icon="logo-rss" [routerLink]="['/home/podcast']" *ngIf="podcast">
				<ion-label>Podcast</ion-label>
			</ion-item>
			<ion-item lines="none" detail="true" [routerLink]="['/home/about']">
				<ion-label>About</ion-label>
			</ion-item>
			<ion-item lines="none" detail="true" detail-icon="open-outline">
				<ion-label>{{home}} Home</ion-label>
			</ion-item>
		</ion-list>
		<ion-list style="margin: 0; padding: 2px 0 4px 0; border-top: 1px solid var(--ion-color-light)">
			<ion-item lines="none" style="font-size: 10px;">
				<ion-label>&copy; {{copyright}} {{year}}</ion-label>
				<ion-label slot="end" style="text-align:right">Powered by <a href="https://sermo.nz">sermo.nz</a></ion-label>
			</ion-item>
		</ion-list>
		<br />
	</app-fixed-grid>
</ion-content>